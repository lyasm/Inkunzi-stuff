<!DOCTYPE html>
<html lang="en">

<head>
	<meta charset="UTF-8">
	<meta name="viewport" content="width=device-width, initial-scale=1.0">
	<title>Diplomacy Web</title>
		<style>
			#nationDropdown {
				width: 300px;
			}
		</style>
</head>

<body>

	<label for="nationDropdown">Select a Nation:</label>
	<input type="text" id="nationDropdown" oninput="filterNations()" list="nationList">

	<datalist id="nationList"></datalist>


	<label for="deepnessDropdown">How deep do you want to go:</label>
	<select id="deepnessDropdown"></select>

	<div id="NationDetails"></div>

	<script>
	  let data;
	  // Fetch the JSON data
	  fetch('processed_sheets.json')
    .then(response => response.json())
    .then(jsonData => {
        data = jsonData;
     })
      .catch(error => console.error('Error loading JSON:', error));

    // Function to filter nations based on user input
    function filterNations() {
      const input = document.getElementById('nationDropdown').value.toLowerCase();
      const filteredNations = data.filter(entry => entry.Nations.toLowerCase().includes(input));

      // Display the details of the first matched nation
      if (filteredNations.length > 0) {
        const selectedNationData = filteredNations[0];
        displayNationDetails(selectedNationData);
      } else {
        // Clear details if no matches found
        displayNationDetails(null);
      }
    }

    // Function to display nation details
    function displayNationDetails(selectedNationData) {
      const nationDetails = document.getElementById('nationDetails');

      // Clear previous details
      nationDetails.innerHTML = '';

      if (selectedNationData) {
        // Display the details in the HTML
        const detailsText = JSON.stringify(selectedNationData, null, 2);
        nationDetails.innerHTML = '<pre>' + detailsText + '</pre>';
      }
    }

  </script>


</body>
</html>
